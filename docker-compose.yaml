services:
  cinephage:
    build: .
    image: cinephage:latest
    container_name: cinephage
    restart: unless-stopped
    ports:
      - '3000:3000'
    volumes:
      # Persist the SQLite database and settings
      - ./data:/app/data
      # Persist logs
      - ./logs:/app/logs
      # Mount your media library (adjust the host path on the left)
      - /path/to/your/media:/media
    environment:
      # REQUIRED: Set this to your server's access URL for CSRF protection
      # Examples: http://localhost:3000, https://cinephage.yourdomain.com
      - ORIGIN=http://localhost:3000

      - LOG_TO_FILE=true
      - TZ=UTC

      # Optional: Worker configuration (defaults shown)
      # - WORKER_MAX_STREAMS=10
      # - WORKER_MAX_IMPORTS=5
      # - WORKER_MAX_SCANS=2
